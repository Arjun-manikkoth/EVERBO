<%-include("../layouts/user/header.ejs")-%>

	<div class="container product_section_container">
		<div class="row">
			<div class="col product_section clearfix">

				<!-- Breadcrumbs -->
			
				<div class="breadcrumbs d-flex flex-row align-items-center">
					<ul>
						<li><a href="/">Home</a></li>
						<li class="active"><a href="/shop"><i class="fa fa-angle-right" aria-hidden="true"></i>Shop</a></li>
					</ul>
					<div class="mt-4">
						<form id="searchForm">
							<div class="d-flex">
							<input type="search" class="search-bar" id="seachInput" name="search">
							<button type="submit" class="btn profile-button btn-sm search-button"><i class="fa fa-search search-icon" aria-hidden="true"></i></button>
							 </div>	
						</form>	
					</div>			
				 <button class="btn profile-button btn-sm" id="logoutbtn" onclick="confirmLogout()">Logout</button>
				</div>

				<!-- Sidebar -->

				<div class="sidebar">
					<div class="sidebar_section">
						<div class="clear-filters-div">
							<button class="btn profile-button clear-filters btn-sm" id="clearFilters">Clear Filters</button>
						</div>
						<hr>
						<div class="sidebar_title">
							<h5>Product Category</h5>
						</div>
						<ul class="sidebar_categories">
              <form id="categSelect">
								<div class="mt-5">
							<%category.forEach((categ)=>{%>
								<%if(categ.is_deleted==0){%>
							<li>
								   <div class="d-flex align-items-center justify-content-between">
										<div class="pt-1">
						          <label for="categoryFilter"><%=categ.name%></label>
										</div>
										<div class="ml-2 pr-4">
											<input type="checkbox" id="categoryFilter" name="check"  class="mme-2" value="<%=categ.name%>" onclick="onlyOne(this)"  >
										</div>
									 </div>	
							</li>
							<%}%>
					   <%})%>
						</div>
						</form>
						</ul>
					</div>
					<!-- Price Range Filtering -->
					<div class="sidebar_section">
						<div class="sidebar_title">
							<h5>Filter by Price</h5>
						</div>
							<div class="price-range-slider">
								<p class="range-value">
									<input type="text" id="amount" readonly>
								</p>
								<div id="slider-range" class="range-bar"></div>	
							</div>
						<div class="filter_button" onclick="filterPrice()"><span>filter</span></div>
					</div>
				</div>

				<!-- Main Content -->
				<div class="main_content">

					<!-- Products -->

					<div class="products_iso">
						<div class="row">
							<div class="col">

								<!-- Product Sorting -->

								<div class="product_sorting_container product_sorting_container_top">
									<ul class="product_sorting">
										<li>
											<span class="type_sorting_text" id="sortSpan">Default Sorting</span>
											<i class="fa fa-angle-down"></i>
											<ul class="sorting_type">
												<li class="type_sorting_btn" ><span onclick="sortProducts(this)" >Price High to Low</span></li>
												<li class="type_sorting_btn" ><span onclick="sortProducts(this)" >Price Low to High</span></li>
												<li class="type_sorting_btn" ><span onclick="sortProducts(this)" >aA-zZ</span></li>
												<li class="type_sorting_btn" ><span onclick="sortProducts(this)" >Zz-Aa</span></li>
											</ul>
										</li>								
									</ul>
									<div class="pages d-flex flex-row align-items-center">
										<div class="page_current">
											<span ><li><%=currentPage%></li></span>
											<ul class="page_selection">
												<%for(let i=1;i<=totalPages;i++){%>
													<li onclick="pageSelect(this)"><%=i%></li>
												<%}%>
											</ul>
										</div>
										<span><div class="page_total"><span>of</span><%=totalPages%></div></span>
										<div id="next_page" class="page_next"><a href=""><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a></div>
									</div>
								</div>

								<!-- Product Grid -->

								<div class="product-grid">

									<!-- Product 1 -->
                <%if(product.length!=0){%>
									<%product.forEach((prod)=>{%>
									<div class="product-item <%=prod.category%>">
										<div class="product discount product_filter">
											<div class="product_image">
												<img src="/images/userImages/<%=prod.image%>" alt="<%=prod.name%>">
											</div>
											<%if(prod.quantity===0){%>
												<div class="product_bubble product_bubble_right product_bubble_red d-flex flex-column align-items-center"><span>Sold!</span></div>
                       <%}else if(prod.discount!=0){%>
											<div class="product_bubble product_bubble_right product_bubble_red d-flex flex-column align-items-center"><span>-Rs <%=prod.discount%></span></div>
                      <%}%>
											<div class="product_info">
												<h6 class="product_name"><a href="/product?prodId=<%=prod._id%>"><%=prod.name%></a></h6>
												<div class="product_price">Rs.<%=prod.price-prod.discount%>.00
													<%if(prod.discount!==0){%>
													<span>Rs.<%=prod.price%></span>
													<%}%>
												</div>
											</div>
										</div>
										<div class="red_button add_to_cart_button"><a href="/add_to_cart?prodId=<%=prod._id%>">add to cart</a></div>
									</div>
										<%})%>
									<%}else{%>
										<div class="shop-error" >
											<h5 class="text-center">We can't find any products matching this selection</h5>
										</div>
									<%}%>
								</div>
								<!-- Product Sorting -->
                 <%if(product.length!=0){%>
								<div class="product_sorting_container product_sorting_container_bottom clearfix">
									<div class="pages d-flex flex-row align-items-center">
										<div class="page_current">
											<span ><li><%=currentPage%></li></span>
											<ul class="page_selection">
												<%for(let i=1;i<=totalPages;i++){%>
												<li onclick="pageSelect(this)"><%=i%></li>
												<%}%>
											</ul>
										</div>
									  <span><div class="page_total"><span>of</span><%=totalPages%></div></span>
										<div id="next_page" class="page_next"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></div>
									</div>
								</div>
                 <%}%>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<!-- Benefit -->
	<div class="benefit">
		<div class="container">
			<div class="row benefit_row">
				<div class="col-lg-3 benefit_col">
					<div class="benefit_item d-flex flex-row align-items-center">
						<div class="benefit_icon"><i class="fa fa-truck" aria-hidden="true"></i></div>
						<div class="benefit_content">
							<h6>free shipping</h6>
							<p>On Order's Above 1500</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 benefit_col">
					<div class="benefit_item d-flex flex-row align-items-center">
						<div class="benefit_icon"><i class="fa fa-money" aria-hidden="true"></i></div>
						<div class="benefit_content">
							<h6>Cash On Delivery</h6>
							<p>For Order's Under 1000</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 benefit_col">
					<div class="benefit_item d-flex flex-row align-items-center">
						<div class="benefit_icon"><i class="fa fa-undo" aria-hidden="true"></i></div>
						<div class="benefit_content">
							<h6>15 days return</h6>
							<p>Read Our Return Policy</p>
						</div>
					</div>
				</div>
				<div class="col-lg-3 benefit_col">
					<div class="benefit_item d-flex flex-row align-items-center">
						<div class="benefit_icon"><i class="fa fa-clock-o" aria-hidden="true"></i></div>
						<div class="benefit_content">
							<h6>Customer Support</h6>
							<p>24*7</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<%-include("../layouts/user/footer.ejs")-%>

